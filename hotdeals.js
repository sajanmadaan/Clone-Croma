data = [
    {
        name: "Vivo V21e (128GB ROM, 8GB RAM, PD2102BF_IN, Sunset Jazz)",
        id: 235454,
        image_url:
          "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1624523026/Croma%20Assets/Communication/Mobiles/Images/235454_idgeca.png/mxw_2048,f_auto",
        price: 19990,
        realPrice: 27990,
        discount: "21% Off",
        rating: "4 Stars",
      },
    {
        name: "OnePlus Nord CE 5G (256GB ROM, 12GB RAM, Charcoal Ink)",
        id: 235152,
        image_url:
          "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1623389445/Croma%20Assets/Communication/Mobiles/Images/235152_aush7p.png/mxw_2048,f_auto",
        price: 25199,
        realPrice: 27999,
        discount: "10% Off",
        rating: "4 Stars",
    },
    {
      name: "Xiaomi Redmi Note 10 Pro (128GB ROM, 8GB RAM, MZB08WUIN, Glacial Blue)",
      id: 233743,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1616503004/Croma%20Assets/Communication/Mobiles/Images/233743_iportt.png/mxw_2048,f_auto",        price: 19499,
      price: 19499,
      realPrice: 21999,
      discount: "11% Off",
      rating: "4.5 Stars",
    },
      {
        name: "Realme 8 5G (128GB ROM, 8GB RAM, RMX3241, Supersonic Blue)",
        id: 234442,
        image_url:
          "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1620113698/Croma%20Assets/Communication/Mobiles/Images/234442_aylud4.png/mxw_2048,f_auto",
        price: 18499,
        realPrice: 18999,
        discount: "3% Off",
        rating: "4.5 Stars",
      },
    {
      name: "Xiaomi Redmi Note 10 Pro (128GB ROM, 8GB RAM, MZB08WUIN, Vintage Bronze)",
      id: 233742,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1616503004/Croma%20Assets/Communication/Mobiles/Images/233743_iportt.png/mxw_2048,f_auto",
      price: 19499,
      realPrice: 21999,
      discount: "11% Off",
      rating: "4.5 Stars",
    },
    {
      name: "Xiaomi Redmi Note 10 Pro (128GB ROM, 6GB RAM, MZB08WUIN, Glacial Blue)",
      id: 233739,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1616503004/Croma%20Assets/Communication/Mobiles/Images/233743_iportt.png/mxw_2048,f_auto",
      price: 19499,
      realPrice: 21999,
      discount: "11% Off",
      rating: "4.5 Stars",
    },
    {
      name: "Xiaomi Redmi Note 10 Pro Max (128GB ROM, 6GB RAM, MZB08LUIN, Dark Night)",
      id: 233747,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1616517842/Croma%20Assets/Communication/Mobiles/Images/233747_wsju8u.png/mxw_2048,f_auto",
      price: 20499,
      realPrice: 22999,
      discount: "11% Off",
      rating: "3.5 Stars",
    },
    {
      name: "Vivo Y73 (128GB ROM, 8GB RAM, PD2078F_IN, Diamond Flare)",
      id: 234749,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1623164395/Croma%20Assets/Communication/Mobiles/Images/234749_nbsxxn.png/mxw_2048,f_auto",
      price: 20990,
      realPrice: 24990,
      discount: "16% Off",
      rating: "4.5 Stars",
    },
    {
      name: "Xiaomi Mi 11 Lite (128GB ROM, 6GB RAM, MZB08IOIN, Tuscany Coral)",
      id: 237421,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1624887481/Croma%20Assets/Communication/Mobiles/Images/237421_m6dsju.png/mxw_2048,f_auto",
      price: 20999,
      realPrice: 24999,
      discount: "12% Off",
      rating: "4.3 Stars",
    },
    {
      name: "Oppo A53s (128GB ROM, 8GB RAM, CPH2321, Crystal Blue)",
      id: 234468,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1622813035/Croma%20Assets/Communication/Mobiles/Images/234468_ntlstl.png/mxw_2048,f_auto",
      price: 16990,
      orginal_price: 18990,
      discount: "11% Off",
      rating: "4.5 Stars",
    },
    {
      name: "Vivo V21e (128GB ROM, 8GB RAM, PD2102BF_IN, Sunset Jazz)",
      id: 235454,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1624523026/Croma%20Assets/Communication/Mobiles/Images/235454_idgeca.png/mxw_2048,f_auto",
      price: 24990,
      realPrice: 27990,
      discount: "11% Off",
      rating: "4 Stars",
    },
    {
      name: "Realme 8 5G (128GB ROM, 8GB RAM, RMX3241, Supersonic Blue)",
      id: 234442,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1620113698/Croma%20Assets/Communication/Mobiles/Images/234442_aylud4.png/mxw_2048,f_auto",
      price: 18499,
      realPrice: 18999,
      discount: "13% Off",
      rating: "4.5 Stars",
    },
    {
      name: "Oppo A74 (128GB ROM, 6GB RAM, CPH2263, Fluid Black)",
      id: 234265,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1618983581/Croma%20Assets/Communication/Mobiles/Images/234265_qtch9x.png/mxw_2048,f_auto",
      price: 17990,
      realPrice: 20990,
      discount: "14% Off",
      rating: "4.5 Stars",
    },
    {
      name: "OnePlus Nord CE 5G (256GB ROM, 12GB RAM, Charcoal Ink)",
      id: 235152,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1623389445/Croma%20Assets/Communication/Mobiles/Images/235152_aush7p.png/mxw_2048,f_auto",
      price: 25199,
      realPrice: 27999,
      discount: "10% Off",
      rating: "4 Stars",
    },
    {
      name: "OnePlus Nord CE 5G (256GB ROM, 12GB RAM, Charcoal Ink)",
      id: 235152,
      image_url:
        "https://d2d22nphq0yz8t.cloudfront.net/88e6cc4b-eaa1-4053-af65-563d88ba8b26/https://media.croma.com/image/upload/v1623389445/Croma%20Assets/Communication/Mobiles/Images/235152_aush7p.png/mxw_2048,f_auto",
      price: 25199,
      realPrice: 27999,
      discount: "10% Off",
      rating: "4 Stars",
    },
  ];
  
  localStorage.setItem("popularData", JSON.stringify(data)) || [];
  var popularItems = JSON.parse(localStorage.getItem("popularData"));
  var cart = JSON.parse(localStorage.getItem("cartItems")) || [];
  var body = document.querySelector("body");
  var popularMainContainer = document.getElementById("popularMainContainer");
  var productContainer = document.getElementById("productContainer");
  var prodBox = document.getElementById("productBox");
  var totalProduct = document.getElementById("totalProduct");
  totalProduct.textContent = "13 Products";
  productContainer.append(prodBox);
  popularMainContainer.append(productContainer);
  body.append(popularMainContainer);
  popularProd(popularItems);
  
  function sortPrice() {
    var selected = document.getElementById("sortSelection").value;
    console.log(selected);
  
    if (selected == "low") {
      popularItems = popularItems.sort(function (a, b) {
        return a.price - b.price;
      });
    }
    if (selected == "high") {
      popularItems = popularItems.sort(function (a, b) {
        return b.price - a.price;
      });
    }
    popularProd(popularItems);
  }
  
  function popularProd(data) {
    prodBox.innerHTML = "";
  
    data.map(function (item) {
      // box for item
      var box = document.createElement("div");
      box.setAttribute("id", "box");
  
      var img = document.createElement("img");
      img.setAttribute("id", "productImage");
      img.src = item.image_url;
      img.addEventListener("click", function(){
        goToItemPage(item);
      });
      // box for product description
      var descriptionBox = document.createElement("div");
      descriptionBox.setAttribute("id", "desBox");
      var prodDes = document.createElement("h3");
      prodDes.setAttribute("id", "prodDes");
      prodDes.textContent = item.name;
      var id = document.createElement("p");
      id.setAttribute("id", "prodId");
      id.textContent = "Product-Id: " + item.id;
      //  price line
  
      var prodPrice = document.createElement("div");
      prodPrice.setAttribute("id", "prodPrice");
      var discPrice = document.createElement("span");
      discPrice.setAttribute("id", "discPrice");
      discPrice.textContent = "₹" + item.price;
      var realPrice = document.createElement("span");
      realPrice.setAttribute("id", "realPrice");
      realPrice.textContent = "₹" + item.realPrice;
      var discount = document.createElement("span");
      discount.setAttribute("id", "discount");
      discount.textContent = item.discount;
      var star = document.createElement("span");
      star.setAttribute("id", "star");
      
      star.innerHTML = '<i class="fas fa-star"></i>';
      star.textContent = item.rating;
  
      var compareBox = document.createElement("div");
      compareBox.setAttribute("id", "compareBox");
      var checkBox = document.createElement("input");
      checkBox.setAttribute("class", "checkBox");
      checkBox.type = "checkbox";
      var text = document.createElement("span");
      text.textContent = "COMPARE";
      var shopWith = document.createElement("span");
      shopWith.setAttribute("class", "shop");
      shopWith.textContent = "SHOP WITH VIDEO";
      var connect = document.createElement("span");
      connect.setAttribute("class", "shop");
      connect.textContent = "CONNECT TO STORE";
  
      var btnBox = document.createElement("div");
      btnBox.setAttribute("id", "btnBox");
  
      //  add to cart button
      var checkOutBtn = document.createElement("button");
      checkOutBtn.setAttribute("id", "checkOutBtn");
      checkOutBtn.textContent = "ADD TO CART";
  
      checkOutBtn.addEventListener("click", () => {
        addToCart(item);
      });
      //buy button
      var buyNowBtn = document.createElement("button");
      buyNowBtn.setAttribute("id", "buyNowBtn");
      buyNowBtn.textContent = "BUY NOW";
      buyNowBtn.addEventListener("click", function () {
        buyNow(item);
      });
  
      // appending data in body
      btnBox.append(checkOutBtn, buyNowBtn);
      compareBox.append(checkBox, text, shopWith, connect);
      prodPrice.append(discPrice, realPrice, discount, star);
      descriptionBox.append(prodDes, id, prodPrice, compareBox, btnBox);
      box.append(img, descriptionBox);
      prodBox.append(box);
    });
  }

  function addToCart(item) {
    cart.push(item);
    localStorage.setItem("cartItems", JSON.stringify(cart));
  }
  
  function buyNow(item) {
    cart.push(item);
    localStorage.setItem("cartItems",JSON.stringify(cart));
    window.location.href="finalcart.html"
  }
  
  //item page 
  function goToItemPage(item){
    var itemData = item;
    localStorage.setItem("itemData",JSON.stringify(itemData));
    window.location.href="item.html"
  }